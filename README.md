# ToDo

По первой части домашнего задания были исправленны все описанные пункты. Заменены котлин синтетики на viewBinding, добавил воркеры для уведомлений и синхронизации, поключил базу данных, уделил очень большое внимание соблюдению архитектуры

По второй части. Подключил апи, связал с базой данных, сделал синхронизацию 

Из минусов, которые мне известны: 

Баги:
1) Баг с обновлением списка при свайпе (Кейс: При удалении несольких элементов и последующем обновлении (посредством swipeToRefresh) сразу после этого, идет запрос на синхронизацию, который не проверяет(не ждет) когда закончится изменение элментов в базе данных. Результат: некоректный список задач)
2) Возможны баги с уведомлениями и синхронизацией. Обновления проверял, работали корректно на более мелких интервалах

Костыли: 
1) Функция [getTasks](https://github.com/Haltaev/ToDo/blob/part-2/app/src/main/java/com/yandex/todo/ui/home/HomeViewModel.kt#L118) на первый взгляд содержит странную вложенную проверку булевской переменной, это связанно с тем что сработывает старый обсерв и одноврменно новый, если я правильно понимаю
2) Возможно стоит описать функцию [синхронизации](https://github.com/Haltaev/ToDo/blob/part-2/app/src/main/java/com/yandex/todo/data/api/repository/TasksRepositoryImpl.kt#L98): Если элемент в БД isDirty и isDeleted, то он удаляется из сервера, если isDirty и !isDeleted то изменяется на сервере. После успешной операции из БД удаляются все элементы вида !isDirty и isDeleted
